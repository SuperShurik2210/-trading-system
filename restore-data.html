<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Restore Data</title>
  <style>
    body { background: #09090B; color: #fff; font-family: monospace; padding: 40px; }
    button { background: #22C55E; color: #000; border: none; padding: 15px 30px; font-size: 18px; cursor: pointer; margin: 10px; }
    #status { margin-top: 20px; padding: 20px; background: #1a1a1a; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h1>
  <button onclick="restoreData()">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å learning_topics</button>
  <div id="status">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</div>

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAovnwR3OKsiWzsS2GBleZlCY-INluhgHI",
      authDomain: "trading-system-6d836.firebaseapp.com",
      databaseURL: "https://trading-system-6d836-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "trading-system-6d836"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    function log(msg) {
      document.getElementById('status').textContent += '\n' + msg;
    }

    async function restoreData() {
      log('–ù–∞—á–∏–Ω–∞—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...');

      // –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–∏–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞)
      const learningTopics = [
        {
          id: 1770403588498,
          title: "–û—Ç–±–æ—Ä –º–æ–Ω–µ—Ç",
          progress: 0,
          fields: [
            {title: "–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞", content: "", icon: "üéØ"},
            {title: "–¢–æ—á–∫–∞ –≤—ã—Ö–æ–¥–∞", content: "", icon: "üö™"},
            {title: "–ö–æ–Ω—Å–ø–µ–∫—Ç", content: "", icon: "üìù"}
          ]
        },
        {
          id: 1770403588499,
          title: "–£—Ä–æ–≤–Ω–∏",
          progress: 0,
          fields: [
            {title: "–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞", content: "–ü—Ä–æ–±–æ–π: –í—Ö–æ–¥ —á–∞—Å—Ç—å—é –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏–∑ –ø–æ–¥–≤–æ–¥—è—â–µ–π —Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç—å—é –≤ —É—Ä–æ–≤–µ–Ω—å.\n\n–ó–∞–∫–æ–ª: –≤—Ö–æ–¥ –∑–∞ —Ö–∞–µ–º –µ—Å–ª–∏ –Ω–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞–ª–æ –∏–º–ø—É–ª—å—Å–∞ –∏ –≤–∫–ª—é—á–∏–ª–æ—Å—å —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –≤—Ö–æ–¥ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç –∑–∞ –Ω–∞–∫–ª–æ–Ω–∫—É, –µ—Å–ª–∏ –∏–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ", icon: "üéØ"},
            {title: "–¢–æ—á–∫–∞ –≤—ã—Ö–æ–¥–∞", content: "–ü—Ä–æ–±–æ–π: –ï—Å–ª–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, —Ç–æ –≤—Å–µ–π –ø–æ–∑–∏—Ü–∏–µ–π –Ω–∞ –≤–∫–∞—Ç–µ –≤ —É—Ä–æ–≤–Ω–µ. –ï—Å–ª–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, —Ç–æ —á–∞—Å—Ç—è–º–∏ –ø–æ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º —Ü–µ–ª—è–º.\n\n–ó–∞–∫–æ–ª: –í—ã—Ö–æ–¥ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–µ –ø–æ–¥ –Ω–∞–∫–ª–æ–Ω–∫–∏ –∏–ª–∏ –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å", icon: "üö™"},
            {title: "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ —Å—Ç–∞–∫–∞–Ω–µ", content: "–ü—Ä–æ–±–æ–π:\n- –ê–∫—Ç–∏–≤–Ω–∞—è –ª–µ–Ω—Ç–∞\n- –ü—Ä–∏–Ω—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ —Å—É–º–º–∞–º–∏ –≤ —Ç–≤–æ—é —Å—Ç–æ—Ä–æ–Ω—É\n- –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É\n- –≤–∫–ª—é—á–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤\n\n–ó–∞–∫–æ–ª: –í —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–æ–¥–≤–æ–¥—è—â–µ–π —Ñ–æ—Ä–º–∞—Ü–∏–∏, –±—ã—Å—Ç—Ä–æ–º –ø–æ–¥—Ö–æ–¥–µ –∫ —É—Ä–æ–≤–Ω—é, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–∫—É–ø–æ–∫ –≤ —Å—Ç–∞–∫–∞–Ω–µ", icon: "üìä"},
            {title: "–ö–æ–Ω—Å–ø–µ–∫—Ç", content: "1. –û–±–æ—Ä–æ—Ç —Ç–æ—Ä–≥–æ–≤ –≤ –±—É–º–∞–≥–µ\n2. –ù–∞–ª–∏—á–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞\n3. –ù–∞–ª–∏—á–∏–µ –∫—Ä–∞—Å–∏–≤—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∏–º–µ—é—â–∏—Ö –±–æ–ª—å—à–æ–µ –∫–æ–ª-–≤–æ –∫–∞—Å–∞–Ω–∏–π (–æ—Ç 3-—Ö)\n4. –Ø—Ä–∫–∏–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π —Ç—Ä–µ–Ω–¥ (—Ç—Ä–µ–Ω–¥ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–∏–ª—å–Ω—ã–º)", icon: "üìù"}
          ]
        },
        {
          id: 1770403588500,
          title: "–¢–æ—Ä–≥–æ–≤–ª—è –¢—Ä–µ–Ω–¥–æ–≤",
          progress: 0,
          fields: [
            {title: "–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞", content: "", icon: "üéØ"},
            {title: "–ö–æ–Ω—Å–ø–µ–∫—Ç", content: "", icon: "üìù"}
          ]
        }
      ];

      try {
        // –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
        log('–í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google...');
        var provider = new firebase.auth.GoogleAuthProvider();
        await auth.signInWithPopup(provider);

        const uid = auth.currentUser.uid;
        log('UID: ' + uid);

        // –ó–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
        log('–ó–∞–ø–∏—Å—ã–≤–∞—é learning_topics...');
        await db.ref('users/' + uid + '/trading_data/learning_topics').set(learningTopics);

        log('\n‚úÖ –ì–û–¢–û–í–û! –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –û–±–Ω–æ–≤–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç.');

      } catch(e) {
        log('‚ùå –û—à–∏–±–∫–∞: ' + e.message);
      }
    }
  </script>
</body>
</html>
